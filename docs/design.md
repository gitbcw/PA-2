# PA 个人助手系统 - 精简核心设计

## 设计理念

PA 个人助手系统采用精简化设计，专注于提供核心价值，降低实现难度，创建一个可行的起点。系统围绕五个核心模块构建，每个模块都有明确的职责和功能边界。

## PDCA 循环设计更新

系统整合了PDCA（计划-执行-检查-行动）循环管理方法，作为个人成长和目标达成的核心框架。PDCA相关的四个页面经过重大改进，以提供更有效的个人管理体验，同时保持PA的基础架构不变。

### 1. Plan（规划）

**AI 辅助目标生成**
- 根据用户输入或历史数据，智能推荐符合 SMART 原则的新目标

**目标分解与拆解**
- 自动将高层目标拆解为可执行的子目标

**目标管理**
- 支持手动调整/补充目标名称、衡量标准、截止日期等
- 提供目标列表视图，展示所有待办与进行中目标
- 支持日级别目标设定和进度调整

### 2. Do（执行）

**简洁的记录功能**
- 对于每个目标，用户可无限添加自由文本记录
- 每条记录即一段文字，无需结构化，低书写成本
- AI 可批量处理这些记录，提取关键信息

**主动进度汇报**
- 用户可主动汇报进度情况
- 系统提供简便的进度更新界面
- 支持通过滑块调整完成度

**提醒机制**
- 对逾期目标高亮警示，并在首页或通知中心提醒
- 按"临近截止"时间节点自动推送提醒

**执行日志归档**
- 所有记录统一存储，为后续 Check 阶段提供数据基础

### 3. Check（检查）

**AI 驱动的进度评估**
- 基于用户汇报的进度和自由文本记录，自动计算各目标完成率、达成度等关键指标
- AI分析用户进度报告，更新目标进度，生成任务，并根据目标、计划和任务截止日期向用户提供通知

**评估结果卡片**
- 每个目标对应一张评估卡，显示进度百分比、偏差说明、风险预警

**可视化图表**
- 饼图/条形图展示目标分布与达成情况
- 折线图跟踪进度趋势，帮助识别波动点

### 4. Act（行动）

**个性化建议卡片**
- 针对单个目标、整体方向及"灵感触发"场景，分别生成改进方案

**卡片分类管理**
- "针对具体目标"/"针对整体方向"/"灵感触发"等多种类型

**快速采纳与落地**
- 一键采纳后自动更新目标指标或生成新子目标
- 采纳记录归档，为下一轮 PDCA 提供参考

## 核心模块

### 1. INPUT (信息采集)

**功能描述**：负责从各种来源收集信息，作为系统的输入端口。

**核心组件**：
- 文本输入界面：用户直接输入文本信息
- 快捷指令：预设的常用输入模板
- 网页内容抓取功能：从网页获取信息
- 文件导入能力：支持从文件中提取信息
- 文件导入与导出：简化的文件管理功能
  - 基础文件导入：支持常见格式文件上传
  - 直接文件下载：简化的导出功能
- 原始数据冷存储：使用阿里云OSS存储原始文件
- 文档向量化存储：将文档转化为向量表示便于语义检索

**技术实现**：
- 文本编辑器组件
- 网页抓取API
- 文件解析库
- 基础文件处理
  - 文件上传与下载
  - 简单的文件元数据记录
- 阿里云OSS存储集成
  - 原始文件存储
  - 安全的文件访问控制
- 向量化基础设施
  - 文档处理与分块
  - 向量嵌入生成
  - 向量存储管理
  - 相似度检索API

### 2. STORE (个人信息库)

**功能描述**：负责存储和组织所有收集的信息，作为系统的数据基础。

**核心组件**：
- 信息存储系统：结构化存储各类信息
- 简单标签和分类：基础的信息组织方式
- 基础搜索功能：快速检索存储的信息
- 向量存储支持：为AI功能提供语义搜索基础
- 文档向量化索引：支持语义化文档检索

**技术实现**：
- 本地存储(localStorage)作为MVP阶段
- JSON数据结构
- 简单的全文搜索
- 向量数据库
  - 初期使用内存向量存储
  - 后期迁移到持久化向量数据库(如Supabase、Pinecone等)
  - 统一的向量检索API

### 3. GOAL-TASK (目标和任务管理)

**功能描述**：负责管理用户的目标和任务，提供结构化的行动框架。

**核心组件**：
- 目标设定与分解：创建和管理层级目标
- 任务管理基础功能：创建、编辑、删除任务
- 简单的进度跟踪：监控目标和任务完成情况
- 目标与任务的关联：建立目标和任务之间的联系

**技术实现**：
- 目标和任务数据模型
- 进度计算逻辑
- 关联关系管理

### 4. AI (智能处理)

**功能描述**：负责对信息进行智能分析和处理，提供认知增强。

**核心组件**：
- 内容摘要与分析：自动生成信息摘要
- 信息关联推荐：发现信息之间的联系
- 知识提取与整理：从非结构化信息中提取结构化知识
- 内容生成辅助：帮助用户生成内容
- 上下文增强：基于个人知识库的AI上下文增强

**技术实现**：
- LLM API集成(OpenAI, Anthropic, GLM等)
- 提示工程
- 简单的知识图谱
- LangChain.js 集成
  - 文档处理管道
  - 向量存储集成
  - 上下文增强工具

### 5. AGENT (执行助手)

**功能描述**：负责执行自动化任务，提供主动支持。

**核心组件**：
- 基础的自动化功能：执行简单的重复任务
- 任务提醒和推送：及时提醒用户
- 简单决策支持：提供决策建议
- 反馈和报告生成：生成进度和成果报告

**技术实现**：
- 定时任务
- 通知系统
- 简单的决策算法
- 报告模板

## 模块交互

### 核心数据流

1. **信息采集流**：
   INPUT → STORE
   - 用户通过INPUT模块输入信息
   - 信息被存储到STORE模块

2. **目标任务流**：
   STORE → GOAL-TASK
   - STORE中的信息被用于创建和更新目标任务
   - 目标任务的状态被记录回STORE

3. **智能处理流**：
   STORE → AI → STORE
   - AI模块从STORE获取信息
   - 处理后的结果被存回STORE
   - 上下文增强流程：用户输入 → 检索相关文档 → 增强AI上下文

4. **执行流**：
   GOAL-TASK → AGENT → STORE
   - AGENT根据GOAL-TASK中的任务执行操作
   - 执行结果被记录到STORE

## 技术架构

### 前端架构

- **框架**：Next.js + TypeScript
- **UI组件**：TailwindCSS + Radix UI
- **状态管理**：React Context + Hooks
- **路由**：Next.js App Router

### 后端架构

- **框架**：Next.js API Routes
- **数据库**：
  - MVP阶段：localStorage + IndexedDB
  - 后期：Prisma + PostgreSQL
- **AI框架**：LangChain.js

### AI集成

- **支持的LLM提供商**：
  - OpenAI API
  - Anthropic API
  - 智谱AI GLM-4 API
  - 自定义LLM API

## 实现路线图

### 1. 搭建项目基础架构 (1-2周)

- 创建Next.js项目
- 设置基本路由和布局
- 配置AI服务连接
- 建立基础组件库

### 2. 实现信息输入与存储 (2-3周)

- 开发基本输入界面
- 设计简单的信息模型
- 实现本地存储逻辑
- 创建基础标签系统

### 3. 开发目标与任务系统 (2-3周)

- 创建目标设定界面
- 实现任务管理功能
- 建立目标-任务关联
- 开发简单的进度跟踪

### 4. 集成AI能力 (2-3周)

- 实现基础内容摘要
- 开发简单的信息分析
- 添加基础AI对话功能
- 创建知识提取功能
- 实现向量化基础设施
  - 文档处理与分块
  - 向量嵌入生成
  - 向量存储集成
  - 统一的检索API

### 5. 开发执行助手功能 (1-2周)

- 实现基础提醒功能
- 创建简单的报告生成
- 开发决策支持功能

### 6. 测试与改进 (持续)

- 自测使用体验
- 调整和优化功能
- 收集使用数据
- 迭代改进

## MVP功能清单

### 必要功能

- 文本输入和存储
- 基础目标和任务管理
- 简单的AI对话
- 内容摘要生成
- 基础搜索

### 可选功能

- 网页内容抓取
- 文件导入
- 向量搜索
- 自动化任务
- 报告生成
- 高级向量检索功能
  - 混合搜索(关键词+语义)
  - 搜索结果重排序
  - 查询重构优化
  - 多模态向量嵌入

## 扩展性考虑

系统设计采用模块化架构，便于后期扩展：

1. **数据层扩展**：从本地存储升级到云端数据库
2. **AI能力扩展**：集成更多LLM和专业模型
3. **功能模块扩展**：添加新的功能模块，如协作、分享等
4. **平台扩展**：从Web扩展到移动端、桌面端

## 技术债务管理

为保持系统长期健康发展，需要关注以下技术债务：

1. **数据迁移**：从本地存储到云端的平滑迁移
2. **性能优化**：随着数据增长的性能考虑
3. **安全加固**：数据加密和访问控制
4. **测试覆盖**：增加自动化测试
